<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.UserMapper">
	<resultMap id="baseResultMap" type="com.app.entity.User">
		<result property="id" column="id" jdbcType="BIGINT"/>
		<result property="userName" column="user_name" jdbcType="VARCHAR"/>
		<result property="password" column="password" jdbcType="VARCHAR"/>
		<result property="sex" column="sex" jdbcType="TINYINT"/>
		<result property="phone" column="phone" jdbcType="VARCHAR"/>
		<result property="departent" column="departent" jdbcType="VARCHAR"/>
		<result property="ruleId" column="rule_id" jdbcType="BIGINT"/>
		<result property="realName" column="real_name" jdbcType="VARCHAR"/>
		<result property="ctime" column="ctime" jdbcType="TIMESTAMP"/>
		<result property="mtime" column="mtime" jdbcType="TIMESTAMP"/>
	</resultMap>
<sql id="baseSql">
	user_name,password,sex,phone,departent,rule_id,real_name,ctime,mtime
</sql>

<insert id="insert" parameterType="com.app.entity.User">
	INSERT INTO app_user
	   (id,user_name,password,sex,phone,departent,rule_id,real_name,ctime,mtime)
	values (
		#{id},#{userName},#{password},#{sex},#{phone},#{departent},#{ruleId},#{realName},#{ctime},#{mtime})
</insert>

<select id="select" parameterType="com.app.entity.User" resultMap="baseResultMap">
	SELECT
		id,user_name,password,sex,phone,departent,rule_id,real_name,ctime,mtime
	FROM
		app_user
</select>
	
	<select id="getUser" parameterType="com.app.entity.PageParameter" resultMap="baseResultMap">
		SELECT <include refid="baseSql"/>
		FROM app_user
	</select>
	
	<update id="updateUser">
	  UPDATE app_user SET
		<trim prefix="" suffix="" suffixOverrides="," >

			<if test="userName != null and userName!=''" >
				user_name=#{userName},
			</if>
			<if test="sex != null and sex!=''" >
				sex=#{sex},
			</if>
			<if test="phone != null and phone!=''" >
				phone=#{phone},
			</if>
			<if test="departent != null and departent!=''" >
				departent=#{departent},
			</if>
			<if test="ruleId != null and ruleId!=''" >
				rule_id=#{ruleId},
			</if>

			<if test="realName != null and realName!=''" >
				real_name=#{realName},
			</if>
			<if test="ctime != null and ctime!=''" >
				ctime=#{ctime},
			</if>
			<if test="mtime != null and mtime!=''" >
				mtime=#{mtime},
			</if>
	</trim>
	</update>
	
	<delete id="deleteUser" parameterType="com.app.entity.User">
		DELETE
		FROM
			app_user
		<trim prefix="where" suffix="" suffixOverrides="and" >
			<if test="userName != null and userName!=''" >
				and user_name=#{userName},
			</if>
			<if test="id != null and id!=''" >
				and `id`=#{id},
			</if>
		</trim>

	</delete>
	
	<insert id="insertUser">
		INSERT INTO 
		<include refid="baseSql"/>
		app_user
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="userName != null and userName!=''" >
				user_name=#{userName},
			</if>
			<if test="sex != null and sex!=''" >
				sex=#{sex},
			</if>
			<if test="phone != null and phone!=''" >
				phone=#{phone},
			</if>
			<if test="departent != null and departent!=''" >
				departent=#{departent},
			</if>
			<if test="ruleId != null and ruleId!=''" >
				rule_id=#{ruleId},
			</if>

			<if test="realName != null and realName!=''" >
				real_name=#{realName},
			</if>
			<if test="ctime != null and ctime!=''" >
				ctime=#{ctime},
			</if>
			<if test="mtime != null and mtime!=''" >
				mtime=#{mtime},
			</if>
		</trim>

	</insert>

</mapper>
